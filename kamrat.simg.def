BootStrap: docker
From: ubuntu:20.04

%post
    export DEBIAN_FRONTEND=noninteractive
    apt-get -y update && apt-get -y upgrade
    apt-get -yq install build-essential cmake libboost-math-dev libboost-program-options-dev libboost-test-dev libboost-serialization-dev libarmadillo-dev binutils-dev python3-pandas python-numpy cython python-setuptools libensmallen-dev libstb-dev libmlpack-dev libboost-iostreams-dev
    apt -y update
    apt -y install git 
    cd /usr
    git clone https://github.com/Transipedia/KaMRaT.git
    cd KaMRaT
    bash compile.bash
    /usr/KaMRaT/bin/kamrat

%environment
    export LC_ALL=C
    export PATH=/usr/KaMRaT/bin:$PATH

%runscript
    kamrat

%labels
    Author: Haoliang Xue
